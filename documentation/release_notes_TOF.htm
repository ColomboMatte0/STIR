<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Summary of changes in STIR release 6.0</title>
  </head>

  <body>
    <h1>Summary of changes in STIR release 6.0</h1>

<p>This version is 95% backwards compatible with STIR 5.x for the user (see below).
Developers might need to make code changes as 
detailed below.
</p>
<h2>Overall summary</h2>
<p>This release is a major upgrade adding Time of Flight (TOF) capabilities to STIR.
</p>


<p>Of course, there is also the usual code-cleanup and 
improvements to the documentation.
</p>

<p>This release contains mainly code written by Kris Thielemans (UCL)  and Richard Brown (UCL).
</p>

    <h2>Patch release info</h2>
    <ul>
      <li> 5.0.0 released ?/?/2020</li>
      <!--
      <li> 4.0.1 released 28/04/2020
        <ul>
          <li><a href=https://github.com/UCL/STIR/pull/513>PR 513</a>  (suppress warnings with clang)</li>
          </ul>
          -->
    </ul>

<h2> Summary for end users (also to be read by developers)</h2>

<h3>Changes breaking backwards compatibility from a user-perspective</h3>
<ul>
  <li> </li>
  <ul>


<h3>Bug fixes</h3>
<ul>
<li>
</li>
</ul>

<h3>New functionality</h3>
<ul>
  <li>
    projectors now have a <code>clone()</code> member, currently returning a bare pointer (like other STIR classes)
  </li>
</ul>


<h3>Changed functionality</h3>
<ul>
  <li>
    We now always check (<code>ProjDataInfo*NoArcCorr</code>) if number of tangential positions in the projection data exceeds the maximum number
    of non arc-corrected bins set for the scanner. If it is, an error is raised.
  </li>
  <li>
    Write <code>STIR6.0</code> as Interfile key version to denote TOF changes.
    This is currently ignored for parsing though.
  </li>
</ul>

<h3>Changed functionality breaking backwards incompatibility</h3>
<ul>
  <li>
    <code>ProjDataInfo::ask_parameters()</code> and therefore <code>create_projdata_template</code>
    has changed:
    <ol>
      <li>If the scanner definition in STIR has TOF capabilities, it will ask for the TOF mashing factor.</li>
      <li>The default for arc-correction has changed to <i>N</i>, i.e. <code>false</code>.</li>
      <li>Default value for span is now 11 for Siemens and 2 for GE scanners.</li>
      <li>The span=0 case (i.e. span-3 for segment 0, span=1 for oblique ones, erroneously
        by STIR used for the GE Advance) is no deprecated. GE uses span=2.<br />
        (Reading a "span=0" case is still supported")</li>
    </ol>
  </li>
</ul>


<h3>Build system</h3>
<ul>
<li>
</li>
</ul>


<h3>Known problems</h3>
<ul>
<li>
</li>
</ul>

<h3>Minor bug fixes</h3>
<ul>
  <li>
</li>
</ul>

<h3>Documentation changes</h3>
<ul>
<li>Added documentation on new features</li> 
<li>Also check the wiki in addition to the provided PDFs.
</li>
 </ul>

<h3>recon_test_pack changes</h3>
<ul>
<li>updated version number and added some clarification to the README.txt</li>
 </ul>

<h3>Other changes to tests</h3>
<ul>
<li>
</li>
</ul>

<H2>What's new for developers (aside from what should be obvious
from the above):</H2>

<h3>Major bugs fixed</h3>
<ul>
<li>see above</li>
</ul>

<h3>Backward incompatibities</h3>
<ul>
  <li>
    <code>virtual ListModeData::get_scanner_ptr()</code> is replaced by <code>ListModeData::get_scanner()</code>.
  </li>
  <li>
    <code>ProjDataInfo*NoArcCorr::get_bin_for_det_pair</code> is now private.
    Use <code>get_bin_for_det_pos_pair</code> instead.
  </li>
</ul>

<h3>New functionality</h3>
<ul>
  <li><code>Bin</code> can now be output to stream as text</li>
  <li>added <code>RunTests::check_if_equal</code> for <code>Bin</code></li>
  <li>
    <code>KeyParser</code> has a new facility to add an alias to a keyword. This can be used to rename a keyword
    for instance while remaining backwards compatible. By default, a warning will be written, but this can be disabled.
  </li>
</ul>


<h3>Other code changes</h3>
<ul>
<li>
</li>
</ul>

</body>

</html>
